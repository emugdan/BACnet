{% extends "socialgraph/base.html" %}

{% block searchBar %}

    <div class="input-group input-group-sm">
        <input type="text" class="form-control" id="searchInput" placeholder="" aria-label="Search Input" aria-describedby="basic-addon2">
        <div class="input-group-append">
            <button class="btn" id="searchBtn" type="button">Search</button>
        </div>
    </div>

{% endblock %}

{% block content %}

    <div class="container">
      <div class="row">
        <div class="col-md-4">
            <h4 class="content-section-title">Filter</h4>
            <div class="content-section" id="usersContentSection">
                 <div>
        <h6 class="p-1 border-bottom">Filter By</h6>
        <p class="mb-2">Gender</p>
        <ul class="list-group">
            <li class="list-group-item list-group-item-action mb-2 rounded"  id = "GenderFemale" value = "female" onclick = genderBasedFilter("female")> <span class="fa fa-circle pr-1" ></span>Female </li>
            <li class="list-group-item list-group-item-action mb-2 rounded" id = "GenderMale" value = "male" onclick = genderBasedFilter("male")> <span class="fa fa-circle pr-1" id="male"></span>Male </li>

            Name
            <div class="searchInputDiv">
                    <input type="text" class="searchInput" id="searchInputFieldName" name="searchInput" placeholder="Search Name">
            </div>

            Town
            <div class="searchInputDiv">
                    <input type="text" class="searchInput" id="searchInputFieldTown" name="searchInput" placeholder="Search Town">
                </div>


            <p id="a"></p>
             <li class="list-group-item list-group-item-action mb-2 rounded" id = "ResetButton" value = "reset" onclick = genderBasedFilter("")> <span class="fa fa-circle pr-1" id="reset"></span>Reset </li>



        </ul>
    </div>


            </div>
        </div>
        <div class="col-md-8">
            <div class="row">
                <div class="col-md-6">
                    <h4 class="content-section-title">Recommendations</h4>
                </div>
                <div class="col-md-6">


                </div>
            </div>



              {% include "./FollowBody.html" %}





        </div>
      </div>
    </div>

    <script>
function myFunction() {
  document.getElementById("demo").innerHTML = document.getElementById("searchbox").value;
}

// MAKE AN AJAX CALL TO VIEWS.PY
        function nameQuery(name) {

            var text = "nq" +name



            $.ajax({

                type: "POST",
                url: '{{ '' }}',
                async: false,
                data: {csrfmiddlewaretoken: '{{ csrf_token }}', text: text},
                success: function (response){
                    $('#test').html('').replaceWith(response)

                }

            });

        }

        function townQuery(town) {

            var town = "tq" +town



            $.ajax({

                type: "POST",
                url: '{{ '' }}',
                async: false,
                data: {csrfmiddlewaretoken: '{{ csrf_token }}', text: town},
                success: function (response){
                    $('#test').html('').replaceWith(response)

                }

            });

        }



         function genderBasedFilter(value) {

             var gender = value;


            $.ajax({

                type: "POST",
                url: '{{ '' }}',
                async: false,
                data: {csrfmiddlewaretoken: '{{ csrf_token }}', text: gender},
                success: function (response){
                    $('#test').html('').replaceWith(response)

                }

            });

        }

        $('#searchInputFieldName').on('keypress', function(e) {
            if (e.which == 13) {
                nameQuery($("#searchInputFieldName").val())
            }
        })

        $('#searchInputFieldTown').on('keypress', function(e) {
            if (e.which == 13) {
                nameQuery($("#searchInputFieldTown").val())
            }
        })





</script>

{% endblock content %}